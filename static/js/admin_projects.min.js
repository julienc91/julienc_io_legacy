$(document).ready(function(){var a=function(d,b){var c=b.children();var f=b.clone();f.children().each(function(e){$(this).width(c.eq(e).width())});return f};$("#project-list tbody").sortable({helper:a,stop:function(b,c){renumber_table();save_priorities()}}).disableSelection()});function renumber_table(){$("#project-list tbody tr").each(function(){var a=$(this).parent().children().index($(this))+1;$(this).find(".priority").html(a)})}function save_priorities(){var a=[];$("#project-list tbody tr").each(function(){a.push($(this).find(".id").text())});$.ajax({method:"POST",url:"/ajax/admin/projects/priority",data:{project_ids:a},error:function(b){Materialize.toast(b.responseJSON.message,4000,"red lighten-2")},traditional:true})};